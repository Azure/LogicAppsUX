import { Meta } from '@storybook/addon-docs';

<Meta title="Docs/E2E Testing" />

# Cypress Testing

## Running Cypress

From `apps/designer-e2e`:

> Open an interactive Cypress session

> `npx cypress open`

> Run in Chrome

> `npx cypress run --headed --browser chrome`

> Run in Edge

> `npx cypress run --headed --browser edge`

> Run in Firefox

> `npx cypress run --headed --browser firefox`

## Best Practices

Before starting, read through the [Best Practices Guide.](https://docs.cypress.io/guides/references/best-practices)

Top priorities:

1. Be specific when selecting elements [Selecting Elements | Cypress Documentation](https://docs.cypress.io/guides/references/best-practices#Selecting-Elements)
   - Avoid using styling attributes like `id` and `class` to select elements
   - Prevents any future styling changes from breaking tests
   - Use one of the following:
     - Select by text: `cy.contains('Submit').click()`
     - Select by Cypress attribute: `cy.get('[data-testId=submit]').click()`
2. Extract actions that can be reused in other tests
   - Move these to shared files
3. Avoid using `.wait({time in milliseconds})`
   - Instead wait on API calls to complete using [aliases.](https://docs.cypress.io/guides/core-concepts/variables-and-aliases#Requests)

## Accessibility Testing

Write tests for accessibility scenarios not covered in Storybook automation using [jest-axe.](https://github.com/component-driven/cypress-axe)

See example in "Flyout.spec.ts"
To examine a falure, click on the failure on the Cypress page, then navigate to details in the console.
