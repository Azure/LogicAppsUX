@import (reference) '../variables.less';

.msla-token-picker-button-container {
  display: flex;
  flex-direction: row-reverse;

  .msla-token-picker-button {
    display: inline-block;
    min-width: 164px;
    text-align: right;

    button {
      background-color: transparent;
      border: none;
      cursor: pointer;
      font: @token-font-size / 20px @font-family;
      padding: 0;
      width: inherit;
      white-space: nowrap;

      img {
        vertical-align: -2px;
      }

      span {
        color: @brandColor;
        display: inline;
        margin-right: 0.5em;
      }

      span {
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
    }
  }
}

.msla-token-picker-container {
  max-height: 550px;
  width: 388px;
  font-size: 12px;

  .msla-token-picker {
    background-color: #fff;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
    box-sizing: border-box;
    padding: 1px;

    .msla-token-picker-header {
      background-color: @brandColor;
      padding: 12px;
      position: relative;

      span {
        color: #fff;
        display: inline-block;
        font: 13px/20px @font-family;
        width: 300px;

        a {
          color: #fff;
          text-decoration: underline;
        }
      }

      button {
        background-color: @brandColor;
        border: none;
        color: #fff;
        cursor: pointer;
        font: 13px/20px @font-family;
        position: absolute;
        right: 12px;
        top: 12px;
      }
    }

    .msla-token-picker-expression {
      background-color: #c8cac7;
      position: relative;
      padding: 12px;

      img {
        position: absolute;
        left: 18px;
        top: 12px;
        margin: 0;
        border: 0;
        padding: 0;
        width: 32px;
        height: 32px;
        z-index: 1;
      }

      input {
        box-sizing: border-box;
        border: none;
        padding: 6px 12px 6px 40px;
        width: 100%;
        height: 32px;
        font: 13px/20px @font-family;
        line-height: 20px;
        -webkit-appearance: textfield;

        &::-webkit-input-placeholder {
          font: 13px/20px @font-family;
        }

        &:-moz-placeholder {
          font: 13px/20px @font-family;
        }

        &::-moz-placeholder {
          font: 13px/20px @font-family;
        }

        &:-ms-input-placeholder {
          font: 13px/20px @font-family;
        }

        &::placeholder {
          font: 13px/20px @font-family;
        }

        &:placeholder-shown {
          font: 13px/20px @font-family;
        }
      }

      .msla-token-picker-expression-editor {
        img {
          position: absolute;
          left: 12px;
          margin: 0;
          border: 0;
          padding: 0;
          width: 32px;
          height: 32px;
        }

        .msla-expression-editor {
          height: 32px;

          .msla-intellisense-editor {
            padding-left: 32px;
          }
        }
      }
    }

    .msla-token-picker-action-bar {
      background-color: #c8cac7;
      position: relative;
      padding: 0 12px 12px 12px;
      height: 32px;
    }

    .msla-token-picker-search {
      background-color: #c8cac7;
      border: none;
      box-sizing: border-box;
      padding: 12px;
      position: relative;

      .msla-token-picker-search-icon {
        left: 24px;
        position: absolute;
        top: 20px;
        z-index: 1;
      }

      input {
        border: none;
        box-sizing: border-box;
        font-family: @font-family;
        font-size: 13px;
        line-height: 20px;
        padding: 6px 12px;
        padding-left: 40px;
        width: 100%;
        -webkit-appearance: textfield;

        &::-webkit-input-placeholder {
          font: 13px/20px @font-family;
        }

        &:-moz-placeholder {
          font: 13px/20px @font-family;
        }

        &::-moz-placeholder {
          font: 13px/20px @font-family;
        }

        &:-ms-input-placeholder {
          font: 13px/20px @font-family;
        }

        &::placeholder {
          font: 13px/20px @font-family;
        }

        &:placeholder-shown {
          font: 13px/20px @font-family;
        }
      }
    }

    .msla-token-picker-sections {
      box-sizing: border-box;
      height: 388px;
      overflow-y: auto;

      .msla-token-picker-section-header {
        background-color: #e8eae7;
        display: flex;
        padding: 0 12px;

        & > span {
          color: #7a7574;
          display: block;
          flex: 1 1 auto;
          font-family: @font-family;
          font-size: 13px;
          padding: 12px 0;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        button {
          background-color: #e8eae7;
          border: none;
          cursor: pointer;
          flex: 0 0 auto;
          padding: 12px 6px;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;

          &:hover,
          &:active {
            span {
              color: rgb(0, 0, 0);
            }
          }

          &::-moz-focus-inner {
            border: 0;
          }

          span {
            color: rgba(0, 0, 0, 0.5);
            display: inline-block;
            font-family: @font-family;
            font-size: 13px;
          }
        }
      }

      .msla-token-picker-section-no-outputs-match {
        padding: 6px 12px;

        button {
          border: none;
          box-sizing: content-box;
          cursor: pointer;
          padding: 0;

          span {
            font-weight: bold;
          }
        }
      }

      .msla-token-picker-section-options {
        padding: 0 12px;

        button {
          background-color: #fff;
          border: none;
          border-bottom: 1px solid #afacac;
          cursor: pointer;
          display: inline-block;
          font-family: @font-family;
          font-size: 13px;
          padding: 5px 0;
          position: relative;
          text-align: left;
          width: 100%;

          &:last-child {
            border-bottom: none;
          }

          &:hover {
            background-color: rgba(0, 119, 255, 0.1);
            /* #07f */
          }

          &:active {
            background-color: #eaeaea;
          }

          img {
            box-sizing: content-box;
            display: inline-block;
            margin: 5px 8px 0 0;
            width: 24px;
            height: 24px;
          }

          .msla-token-picker-option {
            display: inline-block;
            vertical-align: top;
            width: calc(100% - 32px);

            .msla-token-picker-option-inner {
              align-content: center;
              display: flex;
              flex-direction: column;
              justify-content: center;
              height: 34px;

              .msla-token-picker-option-title {
                color: @card-text-color;
                font-family: @font-family;
                font-size: @token-font-size;
                font-weight: 600;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
              }

              .msla-token-picker-option-description {
                color: #7a7574;
                font-family: @font-family;
                font-size: @token-font-size;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
              }
            }
          }

          .msla-token-picker-secure-token {
            position: absolute;
            left: 17px;
            bottom: 5px;
          }
        }
      }
    }

    .msla-token-picker-no-content {
      font-family: @font-family;
      padding: 12px;
      color: #212121;

      a:visited,
      a:link,
      a:hover,
      a:active {
        text-decoration: underline;
      }

      div {
        margin: 0.25em 0;
        white-space: pre-wrap;

        &.msla-token-picker-no-content-header {
          font-weight: 500;
          text-transform: uppercase;
        }
      }

      hr {
        color: #cac8c7;
        margin-top: 12px;
      }

      img {
        margin-right: 12px;
      }
    }

    .msla-token-picker-no-matches {
      font-family: @font-family;
      padding: 0 12px;

      div {
        margin: 1em 0;

        span.msla-token-picker-no-results {
          font-weight: bold;
        }

        &.msla-token-picker-no-matches-header {
          color: lightslategray;
          text-transform: uppercase;
        }

        &.msla-token-picker-no-matches-tip {
          img {
            float: right;
            margin: 3px 0 0 0;
          }
        }
      }

      hr {
        color: #cac8c7;
      }

      img {
        margin-right: 12px;
        vertical-align: middle;
      }
    }
  }
}

.msla-token-recommendation-v2-mobile {
  background-color: #eae8e7;
  border: 1px solid #eae8e7;
  font-family: @font-family;
  margin-top: 1em;
  padding: 0.5em 1em;
  position: relative;
  text-align: left;

  &:after,
  &:before {
    bottom: 100%;
    left: 10%;
    border: solid transparent;
    content: ' ';
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
  }

  &:after {
    border-color: rgba(234, 232, 231, 0);
    border-bottom-color: #eae8e7;
    border-width: 8px;
    margin-left: -8px;
  }

  &:before {
    border-color: rgba(234, 232, 231, 0);
    border-bottom-color: #eae8e7;
    border-width: 9px;
    margin-left: -9px;
  }

  .msla-token-recommendation-section {
    margin: 0.25em 0;

    .msla-token-recommendation-token {
      display: inline-block;
      margin: 0.25em 0.5em;

      &.msla-token-recommendation-see-more {
        button {
          background-color: transparent;
          border: @defaultBorder;

          span {
            padding-left: 0.5em;
          }
        }
      }

      button {
        border: none;
        border-radius: 0.5em;
        color: #333;
        cursor: pointer;
        display: inline-block;
        height: @token-height;
        position: relative;
        vertical-align: top;
        -webkit-transition: color 0.5s ease-out;
        -moz-transition: color 0.5s ease-out;
        -ms-transition: color 0.5s ease-out;
        transition: color 0.5s ease-out;

        &:hover,
        &:active {
          color: #666;
        }

        img {
          border: none;
          border-bottom-left-radius: 0.5em;
          border-top-left-radius: 0.5em;
          box-sizing: content-box;
          display: inline-block;
          height: @token-height;
          left: 0;
          top: 0;
          position: absolute;
          width: @token-height;
        }

        span {
          display: inline-block;
          font-family: @font-family;
          font-size: @token-font-size;
          max-width: 90px;
          overflow: hidden;
          padding: 0 0.5em 0.175em @token-height;
          text-overflow: ellipsis;
          vertical-align: top;
          white-space: nowrap;
        }
      }
    }
  }
}

body.dark {
  .msla-token-recommendation-v2 {
    .msla-token-recommendation-pull-right {
      .msla-token-picker-button {
        button {
          span {
            color: @ms-color-themePrimary;
          }
        }
      }
    }
  }

  .msla-token-picker-container {
    .msla-token-picker {
      background-color: @ms-color-white;
      border-color: @ms-color-neutralTertiary;
      box-shadow: 2px 2px 10px rgba(255, 255, 255, 0.1);

      .msla-token-picker-header {
        background-color: @ms-color-themePrimary;

        span {
          color: @ms-color-white;

          a {
            color: @ms-color-white;
          }
        }

        button {
          background-color: @ms-color-themePrimary;
          color: @ms-color-white;
        }
      }

      .msla-token-picker-expression {
        background-color: @ms-color-neutralTertiaryAlt;
      }

      .msla-token-picker-action-bar {
        background-color: @ms-color-neutralTertiaryAlt;
      }

      .msla-token-picker-search {
        background-color: @ms-color-neutralTertiaryAlt;
      }

      .msla-token-picker-sections {
        .msla-token-picker-section-header {
          background-color: @ms-color-neutralQuaternary;

          & > span {
            color: @ms-color-neutralSecondary;
          }

          button {
            background-color: @ms-color-neutralQuaternary;

            &:hover,
            &:active {
              span {
                color: @ms-color-black;
              }
            }

            span {
              color: rgba(255, 255, 255, 0.5);
            }
          }
        }

        .msla-token-picker-section-options {
          button {
            background-color: @ms-color-white;
            border-bottom: 1px solid @ms-color-neutralTertiary;

            &:hover {
              background-color: rgba(105, 175, 229, 0.1);
            }

            &:active {
              background-color: @ms-color-neutralTertiaryAlt;
            }

            .msla-token-picker-option {
              .msla-token-picker-option-inner {
                .msla-token-picker-option-title {
                  color: @ms-color-black;
                }

                .msla-token-picker-option-description {
                  color: @ms-color-neutralSecondary;
                }
              }
            }
          }
        }
      }

      .msla-token-picker-no-content {
        color: #f8f8f8;
        a:visited,
        a:link,
        a:hover,
        a:active {
          color: #0c86ff;
        }

        hr {
          color: @ms-color-neutralTertiary;
        }
      }

      .msla-token-picker-no-matches {
        div {
          &.msla-token-picker-no-matches-header {
            color: @ms-color-neutralSecondary;
          }
        }

        hr {
          color: @ms-color-neutralTertiary;
        }
      }
    }
  }
}
